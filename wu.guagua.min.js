/**

by wushufen
2014.11.25
wusfun@foxmail.com

*/
+function(a){a.guagua=function(a){var b=a.el,d=(a.prize,a.cover),e=a.callback,f=b.clientWidth,g=b.clientHeight,h=document.createElement("canvas");h.width=f,h.height=g,b.style.position="relative",h.style.position="absolute",h.style.left="0",h.style.top="0",b.appendChild(h);var i=h.getContext("2d");if(i.fillStyle="#A3A3A3",i.beginPath(),i.fillRect(0,0,f,g),i.closePath(),d){var j=new Image;j.src=d,j.onload=function(){i.beginPath(),i.drawImage(j,0,0),i.closePath()}}var k=function(a){a.preventDefault(),i.globalCompositeOperation="destination-out",a.changedTouches&&(a=a.changedTouches[0]);var c=(a.clientX+document.body.scrollLeft||a.pageX)-b.offsetLeft||0,d=(a.clientY+document.body.scrollTop||a.pageY)-b.offsetTop||0;i.beginPath(),i.arc(c,d,15,0,2*Math.PI),i.fill(),i.closePath(),e&&e(l()),h.style.marginRight="0px"==h.style.marginRight?"1px":"0px"},l=function(){for(var a=i.getImageData(0,0,f,g),b=a.data,c=0,d=0;d<b.length;d+=4){var e=b[d+3];128>e&&c++}return(100*(c/(b.length/4))).toFixed(2)};return h.addEventListener("touchmove",k),h.addEventListener("mousemove",k),{ctx:i}},window.wu=a}(window.wu||{});